!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Xpandy=t():e.Xpandy=t()}(window,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=72)}({22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=arguments;t.debounce=function(e,t,n){var i=void 0;return function(){clearTimeout(i),i=setTimeout(function(){i=null,n||e.apply(void 0,r)},t),n&&!i&&e.apply(void 0,r)}}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=[];return{getState:function(t){return e.find(function(e){return e.container===t})},stateExists:function(t){return e.some(function(e){return e.container===t})},register:function(t){var n={items:[],isAnimating:!1,container:t,activeItems:[],_preview:"",_previewElements:[]};return e.push(n),n}}},e.exports=t.default},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t={container:null,items:null,autoCloseOnOpen:!0,arrow:!0,arrowPosition:"right",previewTemplate:function(e){return'\n        <div class="Xpandy-wrapper">\n            '+(e.arrow?'<div class="Xpandy-arrow"></div>':"")+'\n            <div class="Xpandy-container">\n                <div class="Xpandy-body">\n                    <div class="Xpandy-close--wrapper">\n                        <span class="Xpandy-close"></span>\n                    </div>\n                    <div class="Xpandy-base"></div>\n                </div>\n            </div>\n        </div>\n        '},callbacks:{onInit:function(){},onOpen:function(e,t){},onClose:function(e,t){},onUpdate:function(e,t){}}},n=[];return{getConfig:function(e){return n.find(function(t){return t.container===e})},register:function(r){var i=Object.assign(t,e);return i.container=r,n.push(i),i}}},e.exports=t.default},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(24)),i=a(n(23)),o=n(22);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n="string"==typeof e?document.querySelectorAll(e):e;if(!n.length)return!1;var a=(0,r.default)(t),s=(0,i.default)(),u=function(e){var t=e.element,n=e.item,r=a.getConfig(t),i=s.getState(t);if(!i.activeItems.length)return l({element:t,item:n});if(i.activeItems.includes(n))return c({element:t,item:n});var o=i.activeItems.find(function(e){return e.offsetTop===n.offsetTop});return o?p({element:t,item:n,itemOnSameRow:o}):(r.autoCloseOnOpen&&c({element:t},!1),l({element:t,item:n}))},c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.element,r=e.item,i=a.getConfig(n),o=s.getState(n);return o.isAnimating||!o.activeItems.length?o:(o.isAnimating=t,(r?[r]:o.activeItems).forEach(function(e){var t=o._previewElements.find(function(t){return t.parentItem.offsetTop===e.offsetTop});i.arrow&&t.preview.querySelector(".Xpandy-arrow").classList.remove("Xpandy-arrow--isActive"),t.preview.classList.remove("Xpandy-preview--isOpening"),t.preview.classList.remove("Xpandy-preview--isUpdating"),t.preview.classList.add("Xpandy-preview--isClosing");var n=t.parentItem.querySelector(".Xpandy-thumbnail"),r=parseInt(getComputedStyle(n)["margin-top"])+parseInt(getComputedStyle(n)["margin-bottom"]),a=n.getBoundingClientRect().height+r;t.parentItem.style.height=a+"px",t.preview.style.height="0px",e.classList.remove("Xpandy-item--isActive"),t.preview.addEventListener("transitionend",function n(){o.container.classList.remove("Xpandy--isExpanded"),t.preview.removeEventListener("transitionend",n,!1),o.isAnimating=!1,t.preview.remove(),i.callbacks.onClose(e,o)},!1)}),o.activeItems=r?o.activeItems.filter(function(e){return e!==r}):[],o._previewElements=r?o._previewElements.filter(function(e){return e.parentItem.offsetTop!==r.offsetTop}):[],o)},l=function(e){var t=e.element,n=e.item,r=s.getState(t),i=a.getConfig(t);if(r.isAnimating)return r;r.isAnimating=!0,n.appendChild(r._preview.cloneNode(!0));var o=n.querySelector(".Xpandy-wrapper"),u=n.querySelector(".Xpandy-body"),c=n.querySelector(".Xpandy-base"),l=n.querySelector(".Xpandy-content");i.arrow&&setTimeout(function(){var e=n.querySelector(".Xpandy-arrow"),t=n.getBoundingClientRect();e.classList.add("Xpandy-arrow--isActive");var r=t.left+t.width/2;e.style.left=r+"px"},125),o.addEventListener("transitionend",function e(){r.container.classList.add("Xpandy--isExpanded"),r.isAnimating=!1,o.removeEventListener("transitionend",e,!1)},!1),c.innerHTML=l.innerHTML;var p=u.getBoundingClientRect().height,d=p+n.clientHeight;return n.style.height=n.clientHeight+"px",setTimeout(function(){return o.style.height=p+"px"},0),setTimeout(function(){return n.style.height=d+"px"},0),o.classList.add("Xpandy-preview--isOpening"),n.classList.add("Xpandy-item--isActive"),r._previewElements.push({preview:o,parentItem:n}),r.activeItems.push(n),i.callbacks.onOpen(n,r),r},p=function(e){var t=e.element,n=e.item,r=e.itemOnSameRow,i=s.getState(t),o=a.getConfig(t);if(i.isAnimating)return i;i.isAnimating=!0;var u=n.querySelector(".Xpandy-content"),c=i._previewElements.find(function(e){return e.parentItem.offsetTop===n.offsetTop}),l=c.preview.querySelector(".Xpandy-body"),p=c.preview.querySelector(".Xpandy-base");i.activeItems=i.activeItems.filter(function(e){return e!==r}),i.activeItems.push(n),c.preview.classList.remove("Xpandy-preview--isOpening"),c.preview.classList.remove("Xpandy-preview--isUpdating"),setTimeout(function(){return c.preview.classList.add("Xpandy-preview--isUpdating")},0),n.classList.add("Xpandy-item--isActive"),r.classList.remove("Xpandy-item--isActive"),p.innerHTML=u.innerHTML;var d=n.querySelector(".Xpandy-thumbnail"),f=parseInt(getComputedStyle(d)["margin-top"])+parseInt(getComputedStyle(d)["margin-bottom"]),v=l.getBoundingClientRect().height,m=v+d.clientHeight+f;if(c.preview.style.height=v+"px",c.parentItem.style.height=m+"px",o.arrow){var y=c.preview.querySelector(".Xpandy-arrow"),g=n.getBoundingClientRect(),w=g.left+g.width/2;y.style.left=w+"px"}return i.isAnimating=!1,o.callbacks.onUpdate(n,i),i};return Array.from(n).map(function(e){if(s.stateExists(e))return s.getState(e);var t=a.register(e),n=s.register(e);n.items=t.items?Array.from(e.querySelectorAll(t.items)):Array.from(e.children),n._preview=document.createRange().createContextualFragment(t.previewTemplate(t)),e.classList.add("Xpandy--isActive"),n.items.forEach(function(t){t.querySelector(".Xpandy-thumbnail").addEventListener("click",function(){return u({element:e,item:t})})});var r=window.outerWidth;return window.addEventListener("resize",(0,o.debounce)(function(){if(r!==window.outerWidth)return r=window.outerWidth,c({element:e})},250)),Array.from(n._preview.querySelectorAll(".Xpandy-close")).forEach(function(t){return t.addEventListener("click",function(){return c({element:e,el:t})})}),n.togglePreview=function(t){t||c({element:e});var n="string"==typeof t?document.querySelector(t):t;return u({element:e,item:n})},t.callbacks.onInit(),n})},e.exports=t.default},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return e&&e.__esModule?e:{default:e}}(n(25));t.default=r.default,e.exports=t.default}})});