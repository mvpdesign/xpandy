!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Xpandy=t():e.Xpandy=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=72)}({22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=arguments;t.debounce=function(e,t,n){var r=void 0;return function(){clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(void 0,i)},t),n&&!r&&e.apply(void 0,i)}}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=[];return{getState:function(t){return e.find(function(e){return e.container===t})},stateExists:function(t){return e.some(function(e){return e.container===t})},register:function(t){var n={items:[],isAnimating:!1,container:t,activeItems:[],_preview:"",_previewElements:[]};return e.push(n),n}}},e.exports=t.default},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t={container:null,items:null,autoCloseOnOpen:!0,equalHeights:!1,arrow:!0,arrowPosition:"right",previewTemplate:function(e){return'\n        <div class="Xpandy-wrapper">\n            '+(e.arrow?'<div class="Xpandy-arrow"></div>':"")+'\n            <div class="Xpandy-container">\n                <div class="Xpandy-body">\n                    <div class="Xpandy-close--wrapper">\n                        <span class="Xpandy-close"></span>\n                    </div>\n                    <div class="Xpandy-base"></div>\n                </div>\n            </div>\n        </div>\n        '},callbacks:{onInit:function(){},onOpen:function(e,t){},onClose:function(e,t){},onUpdate:function(e,t){}}},n=[];return{getConfig:function(e){return n.find(function(t){return t.container===e})},register:function(i){var r=Object.assign(t,e);return r.container=i,n.push(r),r}}},e.exports=t.default},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(24)),r=a(n(23)),o=n(22);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n="string"==typeof e?document.querySelectorAll(e):e;if(!n.length)return!1;var a=(0,i.default)(t),s=(0,r.default)(),u=function(e){var t=e.element,n=e.item,i=a.getConfig(t),r=s.getState(t);if(!r.activeItems.length)return l({element:t,item:n});if(r.activeItems.includes(n))return c({element:t,item:n});var o=r.activeItems.find(function(e){return e.offsetTop===n.offsetTop});return o?p({element:t,item:n,itemOnSameRow:o}):(i.autoCloseOnOpen&&c({element:t},!1),l({element:t,item:n}))},c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.element,i=e.item,r=a.getConfig(n),o=s.getState(n);return o.isAnimating||!o.activeItems.length?o:(o.isAnimating=t,(i?[i]:o.activeItems).forEach(function(e){var t=o._previewElements.find(function(t){return t.parentItem.offsetTop===e.offsetTop});r.arrow&&t.preview.querySelector(".Xpandy-arrow").classList.remove("Xpandy-arrow--isActive"),t.preview.classList.remove("Xpandy-preview--isOpening"),t.preview.classList.remove("Xpandy-preview--isUpdating"),t.preview.classList.add("Xpandy-preview--isClosing");var n=t.parentItem.querySelector(".Xpandy-thumbnail"),i=parseInt(getComputedStyle(n)["margin-top"])+parseInt(getComputedStyle(n)["margin-bottom"]),a=n.getBoundingClientRect().height+i;t.parentItem.style.height=a+"px",t.preview.style.height="0px",e.classList.remove("Xpandy-item--isActive"),t.preview.addEventListener("transitionend",function n(){o.container.classList.remove("Xpandy--isExpanded"),t.preview.removeEventListener("transitionend",n,!1),o.isAnimating=!1,t.preview.remove(),r.callbacks.onClose(e,o)},!1)}),o.activeItems=i?o.activeItems.filter(function(e){return e!==i}):[],o._previewElements=i?o._previewElements.filter(function(e){return e.parentItem.offsetTop!==i.offsetTop}):[],o)},l=function(e){var t=e.element,n=e.item,i=s.getState(t),r=a.getConfig(t);if(i.isAnimating)return i;i.isAnimating=!0,n.appendChild(i._preview.cloneNode(!0));var o=n.querySelector(".Xpandy-wrapper"),u=n.querySelector(".Xpandy-body"),c=n.querySelector(".Xpandy-base"),l=n.querySelector(".Xpandy-content");r.arrow&&setTimeout(function(){var e=n.querySelector(".Xpandy-arrow"),t=n.getBoundingClientRect();e.classList.add("Xpandy-arrow--isActive");var i=t.left+t.width/2;e.style.left=i+"px"},125),o.addEventListener("transitionend",function e(){i.container.classList.add("Xpandy--isExpanded"),i.isAnimating=!1,o.removeEventListener("transitionend",e,!1)},!1),c.innerHTML=l.innerHTML;var p=u.getBoundingClientRect().height,d=p+n.clientHeight;return n.style.height=n.clientHeight+"px",setTimeout(function(){return o.style.height=p+"px"},0),setTimeout(function(){return n.style.height=d+"px"},0),o.classList.add("Xpandy-preview--isOpening"),n.classList.add("Xpandy-item--isActive"),i._previewElements.push({preview:o,parentItem:n}),i.activeItems.push(n),r.callbacks.onOpen(n,i),i},p=function(e){var t=e.element,n=e.item,i=e.itemOnSameRow,r=s.getState(t),o=a.getConfig(t);if(r.isAnimating)return r;r.isAnimating=!0;var u=n.querySelector(".Xpandy-content"),c=r._previewElements.find(function(e){return e.parentItem.offsetTop===n.offsetTop}),l=c.preview.querySelector(".Xpandy-body"),p=c.preview.querySelector(".Xpandy-base");r.activeItems=r.activeItems.filter(function(e){return e!==i}),r.activeItems.push(n),c.preview.classList.remove("Xpandy-preview--isOpening"),c.preview.classList.remove("Xpandy-preview--isUpdating"),setTimeout(function(){return c.preview.classList.add("Xpandy-preview--isUpdating")},0),n.classList.add("Xpandy-item--isActive"),i.classList.remove("Xpandy-item--isActive"),p.innerHTML=u.innerHTML;var d=n.querySelector(".Xpandy-thumbnail"),f=parseInt(getComputedStyle(d)["margin-top"])+parseInt(getComputedStyle(d)["margin-bottom"]),v=l.getBoundingClientRect().height,m=v+d.clientHeight+f;if(c.preview.style.height=v+"px",c.parentItem.style.height=m+"px",o.arrow){var y=c.preview.querySelector(".Xpandy-arrow"),g=n.getBoundingClientRect(),w=g.left+g.width/2;y.style.left=w+"px"}return r.isAnimating=!1,o.callbacks.onUpdate(n,r),r},d=function(e){var t=[];e.state.items.map(function(e){e.style.height="",e.querySelector(".Xpandy-thumbnail").style.height="",t[e.offsetTop]||(t[e.offsetTop]=[]),t[e.offsetTop].push(e.querySelector(".Xpandy-thumbnail"))}),Object.keys(t).map(function(e){var n=t[e].reduce(function(e,t){var n=t.getBoundingClientRect().height;return n>e?n:e},0);return t[e].map(function(e){return e.style.height=n+"px"})})};return Array.from(n).map(function(e){if(s.stateExists(e))return s.getState(e);var t=a.register(e),n=s.register(e);n.items=t.items?Array.from(e.querySelectorAll(t.items)):Array.from(e.children),n._preview=document.createRange().createContextualFragment(t.previewTemplate(t)),e.classList.add("Xpandy--isActive"),n.items.forEach(function(t){t.querySelector(".Xpandy-thumbnail").addEventListener("click",function(){return u({element:e,item:t})})});var i=window.outerWidth;return window.addEventListener("resize",(0,o.debounce)(function(){if(i!==window.outerWidth)return i=window.outerWidth,d({state:n}),c({element:e})},250)),Array.from(n._preview.querySelectorAll(".Xpandy-close")).forEach(function(t){return t.addEventListener("click",function(){return c({element:e})})}),n.togglePreview=function(t){t||c({element:e});var n="string"==typeof t?document.querySelector(t):t;return u({element:e,item:n})},t.equalHeights&&d({state:n}),t.callbacks.onInit(),n})},e.exports=t.default},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(25));t.default=i.default,e.exports=t.default}})});