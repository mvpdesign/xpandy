!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Xpandy=t():e.Xpandy=t()}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=72)}({22:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=arguments;t.debounce=function(e,t,n){var r=void 0;return function(){clearTimeout(r),r=setTimeout(function(){r=null,n||e.apply(void 0,i)},t),n&&!r&&e.apply(void 0,i)}},t.functionExists=function(e){return"function"==typeof e}},23:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){var e=[];return{getState:function(t){return e.find(function(e){return e.container===t})},stateExists:function(t){return e.some(function(e){return e.container===t})},register:function(t){var n={items:[],isAnimating:!1,container:t,activeItems:[],_preview:"",_previewElements:[]};return e.push(n),n}}},e.exports=t.default},24:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(e){var t={container:null,items:null,autoCloseOnOpen:!0,equalHeights:!1,arrow:!0,arrowPosition:"right",previewTemplate:function(e){return'\n        <div class="Xpandy-wrapper">\n            '+(e.arrow?'<div class="Xpandy-arrow"></div>':"")+'\n            <div class="Xpandy-container">\n                <div class="Xpandy-innerContainer">\n                    <div class="Xpandy-body">\n                        <div class="Xpandy-close--wrapper">\n                            <span class="Xpandy-close"></span>\n                        </div>\n                        <div class="Xpandy-base"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n        '},callbacks:{onInit:function(){},onOpen:function(e,t){},onClose:function(e,t){},onUpdate:function(e,t){}}},n=[];return{getConfig:function(e){return n.find(function(t){return t.container===e})},register:function(i){var r=Object.assign(t,e);return r.container=i,n.push(r),r}}},e.exports=t.default},25:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(24)),r=a(n(23)),o=n(22);function a(e){return e&&e.__esModule?e:{default:e}}t.default=function(e,t){var n="string"==typeof e?document.querySelectorAll(e):e;if(!n.length)return!1;var a=(0,i.default)(t),s=(0,r.default)(),u=function(e){var t=e.element,n=e.item,i=a.getConfig(t),r=s.getState(t);if(!r.activeItems.length)return l({element:t,item:n});if(r.activeItems.includes(n))return c({element:t,item:n});var o=r.activeItems.find(function(e){return e.offsetTop===n.offsetTop});return o?p({element:t,item:n,itemOnSameRow:o}):(i.autoCloseOnOpen&&c({element:t},!1),l({element:t,item:n}))},c=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.element,i=e.item,r=a.getConfig(n),u=s.getState(n);return u.isAnimating||!u.activeItems.length?u:(u.isAnimating=t,(i?[i]:u.activeItems).forEach(function(e){var t=u._previewElements.find(function(t){return t.parentItem.offsetTop===e.offsetTop});r.arrow&&t.preview.querySelector(".Xpandy-arrow").classList.remove("Xpandy-arrow--isActive"),t.preview.classList.remove("Xpandy-preview--isOpening"),t.preview.classList.remove("Xpandy-preview--isUpdating"),t.preview.classList.add("Xpandy-preview--isClosing");var n=t.parentItem.querySelector(".Xpandy-thumbnail"),i=parseInt(getComputedStyle(n)["margin-top"])+parseInt(getComputedStyle(n)["margin-bottom"]),a=n.getBoundingClientRect().height+i;t.parentItem.style.height=a+"px",t.preview.style.height="0px",e.classList.remove("Xpandy-item--isActive"),t.preview.addEventListener("transitionend",function n(){u.container.classList.remove("Xpandy--isExpanded"),t.preview.removeEventListener("transitionend",n,!1),u.isAnimating=!1,t.preview.remove(),(0,o.functionExists)(r.callbacks.onClose)&&r.callbacks.onClose(e,u)},!1)}),u.activeItems=i?u.activeItems.filter(function(e){return e!==i}):[],u._previewElements=i?u._previewElements.filter(function(e){return e.parentItem.offsetTop!==i.offsetTop}):[],u)},l=function(e){var t=e.element,n=e.item,i=s.getState(t),r=a.getConfig(t);if(i.isAnimating)return i;i.isAnimating=!0,n.appendChild(i._preview.cloneNode(!0));var u=n.querySelector(".Xpandy-wrapper"),l=n.querySelector(".Xpandy-innerContainer"),p=n.querySelector(".Xpandy-base"),d=n.querySelector(".Xpandy-content");r.arrow&&setTimeout(function(){var e=n.querySelector(".Xpandy-arrow"),t=n.getBoundingClientRect();e.classList.add("Xpandy-arrow--isActive");var i=t.left+t.width/2;e.style.left=i+"px"},125),u.addEventListener("transitionend",function e(){i.container.classList.add("Xpandy--isExpanded"),i.isAnimating=!1,u.removeEventListener("transitionend",e,!1)},!1),p.innerHTML=d.innerHTML;var f=l.getBoundingClientRect().height,v=f+n.clientHeight;return n.style.height=n.clientHeight+"px",setTimeout(function(){return u.style.height=f+"px"},0),setTimeout(function(){return n.style.height=v+"px"},0),u.classList.add("Xpandy-preview--isOpening"),n.classList.add("Xpandy-item--isActive"),i._previewElements.push({preview:u,parentItem:n}),Array.from(u.querySelectorAll(".Xpandy-close")).forEach(function(e){return e.addEventListener("click",function(){return c({element:t})})}),i.activeItems.push(n),(0,o.functionExists)(r.callbacks.onOpen)&&r.callbacks.onOpen(n,i),i},p=function(e){var t=e.element,n=e.item,i=e.itemOnSameRow,r=s.getState(t),u=a.getConfig(t);if(r.isAnimating)return r;r.isAnimating=!0;var c=n.querySelector(".Xpandy-content"),l=r._previewElements.find(function(e){return e.parentItem.offsetTop===n.offsetTop}),p=l.preview.querySelector(".Xpandy-innerContainer"),d=l.preview.querySelector(".Xpandy-base");r.activeItems=r.activeItems.filter(function(e){return e!==i}),r.activeItems.push(n),l.preview.classList.remove("Xpandy-preview--isOpening"),l.preview.classList.remove("Xpandy-preview--isUpdating"),setTimeout(function(){return l.preview.classList.add("Xpandy-preview--isUpdating")},0),n.classList.add("Xpandy-item--isActive"),i.classList.remove("Xpandy-item--isActive"),d.innerHTML=c.innerHTML;var f=n.querySelector(".Xpandy-thumbnail"),v=parseInt(getComputedStyle(f)["margin-top"])+parseInt(getComputedStyle(f)["margin-bottom"]),m=p.getBoundingClientRect().height,y=m+f.clientHeight+v;if(l.preview.style.height=m+"px",l.parentItem.style.height=y+"px",u.arrow){var g=l.preview.querySelector(".Xpandy-arrow"),w=n.getBoundingClientRect(),h=w.left+w.width/2;g.style.left=h+"px"}return r.isAnimating=!1,(0,o.functionExists)(u.callbacks.onUpdate)&&u.callbacks.onUpdate(n,r),r},d=function(e){var t=[];e.state.items.map(function(e){e.style.height="",e.querySelector(".Xpandy-thumbnail").style.height="",t[e.offsetTop]||(t[e.offsetTop]=[]),t[e.offsetTop].push(e.querySelector(".Xpandy-thumbnail"))}),Object.keys(t).map(function(e){var n=t[e].reduce(function(e,t){var n=t.getBoundingClientRect().height;return n>e?n:e},0);return t[e].map(function(e){return"none"!=e.style.display&&0!=n&&(e.style.height=n+"px")})})};return Array.from(n).map(function(e){if(s.stateExists(e))return s.getState(e);var t=a.register(e),n=s.register(e);n.items=t.items?Array.from(e.querySelectorAll(t.items)):Array.from(e.children),n._preview=document.createRange().createContextualFragment(t.previewTemplate(t)),e.classList.add("Xpandy--isActive"),n.items.forEach(function(t){t.querySelector(".Xpandy-thumbnail").addEventListener("click",function(){return u({element:e,item:t})})});var i=window.outerWidth;return window.addEventListener("resize",(0,o.debounce)(function(){if(t.equalHeights&&d({state:n}),i!==window.outerWidth)return i=window.outerWidth,c({element:e})},250)),n.togglePreview=function(t){if(!t)return c({element:e});var n="string"==typeof t?document.querySelector(t):t;return u({element:e,item:n})},t.equalHeights&&d({state:n}),(0,o.functionExists)(t.callbacks.onInit)&&t.callbacks.onInit(),n})},e.exports=t.default},72:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e){return e&&e.__esModule?e:{default:e}}(n(25));t.default=i.default,e.exports=t.default}})});